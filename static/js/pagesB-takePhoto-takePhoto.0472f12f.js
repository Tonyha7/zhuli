(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesB-takePhoto-takePhoto"],{"3c7b":function(t,e,i){"use strict";i.r(e);var n=i("d1cf"),a=i("5567");for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("de51");var c=i("f0c5"),s=Object(c["a"])(a["default"],n["b"],n["c"],!1,null,"16ce543b",null,!1,n["a"],void 0);e["default"]=s.exports},"3cb9":function(t,e,i){t.exports=i.p+"pagesB/static/takePhoto/allrlk.png"},"4c441":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAAAq1BMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////Nr6iZAAAAOHRSTlMAS6meG4D04b+yg2Mi08SWjq2icF1ZVBi4intOO+zq5GxFMCYRCQZ/yJF2QjXu2djNmWhDKxUP295Jc3AAAATKSURBVHjavNjncuowEAXgtezYBveGwfQSAoH0cs/7P9kdLQQH0ii2vh+ZyYRE0ko62gld5N1dr913Uu16Onaase0NsTX07LjpjKfXpMD61odkLtpR/BQ2m+FTHLUXJiT/dk11mmXBPwB2MBobdMAYjwIbwL8gm1Et5i19ANhXq/kvn1nd2MBAb82palpgwRRpTn/KU2HCCrRqh28ADcfYr/mqmzlJUSRO1l0d/MiRn9eqHL7fdKk0cZb2Hfbc2UtnQiW32a9qCi8NmB13V2CtaJv4gdkutHw3hY6Jxgtd6i0EgtePAEgj/ClKP+LgNQDCN7pI+gDRo41eaOEoVrj7FYGHlM43EfBbtJG1cYJ2RhstH2JCZ3ruDxNis+QRJ3pMZsSSYf+ZzmHoiFxitxbOYN0ScyPoBp2sdY+CWNfHmfwusQL3LTpRB55G0lTHBfQpSZqHDp0khshJGg1wkcGIpFwgphP4ECTlOi6m5yQJ+HQ0C+KjchXY7qWARUcCdJKuUJErknSAjuLhqtrxsfuDHh0hLsevfgbxMffvphy/+hl06A9NLEm6AeqYwRLNP/IPohy/jhkI/JqJxr2Xl/WvYwa5d2/Qz3Ro9ayf8eHSoNOPnlHUtf6yBgWe6QeTfrSZY224vlF/Qt8TQ5d3CbXhE+YOBX0rRbJNzPrw/idI6RtvDz6/v6gVv87+wxt9FfINnQ5Qq8GU0yakL14g6t6AchMEXuhQAz3Z/6F2sk/soUEHNAS8O6gdn7QA2mEBzFfZf0MB2a2/mgcl0PidnFlQwJrxq6/tF6Dv8gVVgePG7Tf2C8DP9COUeOTGY68EAWQBMiiSyRIgoJ25xfVoQ5E277o1/9QHOXw5VeHIcT71RrppcBarwklsmDptzQYyha8tKGNdyzwezGgjQ8qvsTrbAbNdJyh3IIJCkdyDXXdo+fytSrxk3yLWQ8jvoFJdPvU9KjOpA6U6Zf7SAjIRbChly/zDgv/9yd+QCaVM4kXL6zjlUJ5AsQk/QbJDHGPEwaiYwx34WA7NX5dQbMlrd/gSGGrPYHkKDb4GMZ+HOyh2xyc/lmtfqM7BMgsXsg6ebA9WUG4lWyCPiIaR6iAuwzgaEhFide3gYWMYg+gdT6pjoAyCJ7yTy29hAuUSfg9dWvNdLKBcwRm0/t+92a4gCINR+DUNQ8giCFn1M7Kv/+3+rywc0oqwKWw+y3MBbdDbts45D78B/CvAhxD/GfIHEX4U45cRfh3jDxL8SYY/SvFnOf7HREp9GtMgsjbRqY2Tr/o2/n24M6ffVRrdTZaT6FGVmGzqLkaPZggqPaqqZgQeL5uyIiyaSq9iMalwmw43KnmrFjercbueDyzwyIYPrfDYjg8u8eiWD6/x+J4vMOAVDr7Ewtd48CJT6CrX3FnlMmW2UDuwZbaY63wiSs8kyBzU7fpKHNrYHYRYfyNOle2U1P7XT/uVm3PvtdpXTzaXXtKed2A/TqR3tdl/tbvWyyHl+ovvcvtlWL1e+a/3KxmkwjfgUPwb4sFDLjzmEwHoxKNeEcBuX7hftleLbtxvofbZJ+43BeAxAuTzDXrNxKnMQq8hsN9ynfzCfpN1GQL7teBzmrvA5zzdHiWkDsW5G/0+Fwfp0HTgd9/4/xMU4ELeOrnWsgAAAABJRU5ErkJggg=="},5567:function(t,e,i){"use strict";i.r(e);var n=i("703e"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},"703e":function(t,e,i){"use strict";(function(t){i("7a82");var n=i("ee27").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("f07e")),o=n(i("c964"));i("a9e3"),i("e9c4"),i("d3b7");var c={props:{hasSwitch:{type:Boolean,default:!0},hasAlbum:{type:Boolean,default:!0},initScale:{type:Number,default:1.277},original:{type:Boolean,default:!0}},data:function(){return{pusher:null,canvasW:0,canvasH:0,device:"front"}},onLoad:function(){t.log("开启相机"+JSON.stringify(this.$store.state.SystemInfo))},onUnload:function(){t.log("离开人脸采集"),uni.$off("FinishedTakePhoto")},computed:{scale:function(){return this.initScale>1.77?1.77:this.initScale<1.27?1.27:this.initScale},livePusherStyle:function(){var e={width:this.$store.state.SystemInfo.windowWidth,height:this.$store.state.SystemInfo.windowHeight-this.$store.state.SystemInfo.CustomBar};return t.log(e),e},closeContainerStyle:function(){return{top:this.$store.state.SystemInfo.CustomBar}},actionContainerStyle:function(){return{width:this.$store.state.SystemInfo.windowWidth}}},methods:{InitlivePusher:function(){this.pusher=uni.createLivePusherContext("livePusher",this),this.pusher.startPreview({success:function(e){t.log("livePusher.startPreview:"+JSON.stringify(e))}})},deviceQH:function(){this.hasSwitch&&(this.device="back"==this.device?"front":"back")},closeView:function(){t.log("---------close-----------"),uni.navigateBack()},takePhoto:function(){var e=this;t.log("---------takePhoto-----------"),t.log("相机初始化完成"),t.log("------------takePhoto--------------");var i=uni.createCameraContext("camera");t.log("------------takePhoto--------ctx------"+i),i.takePhoto({quality:"normal",success:function(){var i=(0,o.default)((0,a.default)().mark((function i(n){var o;return(0,a.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t.log("------------takePhoto--------res------"+JSON.stringify(n)),o=n.tempImagePath,e.original){i.next=6;break}return i.next=5,e.cutImg(o);case 5:o=i.sent;case 6:uni.navigateBack(),uni.$emit("FinishedTakePhoto",o);case 8:case"end":return i.stop()}}),i)})));return function(t){return i.apply(this,arguments)}}(),fail:function(e){t.log("------------takePhoto--------err------"+e)}})},cutImg:function(t){var e=this;return new Promise((function(i,n){uni.getImageInfo({src:t,success:function(t){var a={x:0,y:t.height>e.scale*t.width?(t.height-e.scale*t.width)/2:0},o=t.width,c=t.height>e.scale*t.width?e.scale*t.width:t.height,s=uni.createCanvasContext("canvasid",e);e.canvasW=t.width,e.canvasH=t.height,s.drawImage(t.path,0,0,e.canvasW,e.canvasH),s.draw(!0,(function(){setTimeout((function(){uni.canvasToTempFilePath({x:a.x,y:a.y,width:o,height:c,destWidth:o,destHeight:c,canvasId:"canvasid",fileType:"jpg",success:function(t){i(t.tempFilePath)},fail:function(t){n(t)}},e)}),500)}))},fail:function(t){n(t)}})}))},chooseImage:function(){var t=this;this.hasAlbum&&uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(e){t.$emit("takePhoto",e.tempFilePaths[0])}})},error:function(e){t.log(e)}}};e.default=c}).call(this,i("5a52")["default"])},b03d:function(t,e,i){var n=i("f72a");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("6c7f87a7",n,!0,{sourceMap:!1,shadowMode:!1})},d1cf:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticStyle:{height:"100%","background-color":"white !important",position:"relative"}},[n("v-uni-cover-image",{staticClass:"allrl-container",style:t.livePusherStyle,attrs:{src:i("3cb9")}}),n("v-uni-cover-view",{staticClass:"action-container",style:t.actionContainerStyle},[n("v-uni-cover-image",{staticClass:"coverImage",staticStyle:{width:"60upx",height:"60upx","margin-left":"40upx"},attrs:{src:i("e4fe")},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.deviceQH.apply(void 0,arguments)}}}),n("v-uni-cover-image",{staticClass:"coverImage take-photo-container",staticStyle:{width:"120upx",height:"120upx"},attrs:{src:i("4c441")},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.takePhoto.apply(void 0,arguments)}}}),n("v-uni-cover-view",{staticClass:"coverImage close-container",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.closeView.apply(void 0,arguments)}}},[t._v("取消")])],1)],1)},a=[]},de51:function(t,e,i){"use strict";var n=i("b03d"),a=i.n(n);a.a},e4fe:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAn1BMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8Kd3m4AAAANHRSTlMAv0AYRSPvjYDFpZlK+s6viIRpXFItDuO0lTsp59vTuHVkMhAH9erUvKuqn3t0cmBXNDAffqZeBAAAAaFJREFUWMPt1ddywkAMBVB53TDgAhjTS4BUStr9/2/LMCFAsFgt7CRPnEfPXM1aK8t08w/cWm1ONpZANCMLDoAgtywArG0LoHdd2ldqVwBj/9JwexUFOOZdFL+boGRqHn9zwOmaHr6LM+5dk3y/g/OUnPegE4n5DbQepHwLejWpf0K+SoIRtJpSvgqttpR/hU5UGHx5Gg0S1bEXO72meh+4xb5oS4wfOtCpqMXJqTp9kn38xN3Sa6VG30CIrSe/3JeQOS2VFEN20kL29qfOmRYq5m6ZZx53JxmAOhlxx9x+i4A7MlNFvKASoGKYz4An7rVSw3yFH8twxCz+ueLyfLOSnEpUUhoBNwGAYcEUZv4NAE7uOx9iKyMTIU4L1Hf7Ph6Q7DPF7wL91eSwGGVejO8CXt5qbiovjzjSl/NNaDzL+RdoyAPvB9BpWP5bJparPZDyNej5JHiAljxCCTQeXSKbFqaF0b66By9okKEuGHHok7FpKT7KZnQJDwdB8pwpupQ/3sWd9oKu09sVoKutbQtQHlgWoFkELMnGvJcO6ObvfQGhGLwYvwPzIQAAAABJRU5ErkJggg=="},f72a:function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,".container-view[data-v-16ce543b]{position:relative;width:100vw;height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center}.close-view[data-v-16ce543b]{position:relative;width:100%;height:100%;display:flex;flex-direction:row;justify-content:center;align-items:center}.allrl-container[data-v-16ce543b]{position:fixed;top:0;width:100%;height:100%}.bg-container[data-v-16ce543b]{position:relative;flex:1;width:100vw;display:flex;align-items:center;background:#000}.action-container[data-v-16ce543b]{width:100%;height:%?200?%;\n\t/* flex: 1; */justify-content:space-between;align-items:center;background:#000;position:fixed;bottom:%?0?%;display:flex;flex-direction:row}.tip-container[data-v-16ce543b]{position:absolute;z-index:1001;width:100%;bottom:%?250?%;font-size:%?66?%;text-align:center;color:#000;font-weight:700}.takePhotoView[data-v-16ce543b]{width:100vw;height:100vh;position:relative;\n\t/* position: fixed; */\n\t/* top: 0; */\n\t/* left: 0; */\n\t/* z-index: 9999; */display:flex;justify-content:center;align-items:center;flex-direction:column}.canvas[data-v-16ce543b]{opacity:0;position:fixed;top:100vh;z-index:-999}.coverImage[data-v-16ce543b]{position:relative}.control-item-img[data-v-16ce543b]{position:relative;top:0;left:0;width:%?100?%;height:%?100?%}.close-container[data-v-16ce543b]{position:relative;font-size:%?40?%;background-color:#000;color:#fff;margin-right:%?40?%}",""]),t.exports=e}}]);